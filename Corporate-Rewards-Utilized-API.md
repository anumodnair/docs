### `Utilized Gift Push Notification`

This will send notification to the endpoint once a gift is utilized(redeemed). For this an enpoint must be provided to YGAG for sending the utilized data details, as and when the eGift Card gets utilized.

#### Post Data

    {  
       'order_id':18978,
       'country':'AE',
       'extra_fields':'',
       'utilized_date':'2017-09-13',
       'brand_code':'1847',
       'ordered_amount':{  
          'currency':'AED',
          'amount':200
       },
       'reference_id':'100222',
       'gift_voucher':{  
          'code':'4751719195162'
       }
    }
    
#### Post Parameters
| Parameter    | Type | Description   |
| ------------ | ---- | ------------- |
| order_id | int | Order ID generated by the YGAG for the corresponding order |
| country | string | The country to where the gift was purchased |
| extra_fields | string | Returns the extra parameter passed during the order requested by the client |
| utilized_date | date | Returns the date when the gift was utilized. It could be even `null`|
| brand_code | string | Unique Code of the brand |
| ordered_amount | float | Gift ordered Amount |
| reference_id | string | Reference ID sent by the client |
| gift_voucher | array | Contains the gift code, Pin or url of the issued gift |

#### Protecting Your EndPoint :  Authentication & Verification of POST Data

1. Use your `API_SECRET` and `API_KEY` to generate Signature at your end. You can verify the POST data is from YouGotaGift when the signature generated at your end is matched with the Signature sent in the authorization header. Signature creation is explained [here](https://github.com/YouGotaGift/docs/blob/master/Corporate-eGift-API-Sample-Code-V2.md)**

2. You can whitelist the IPAddress of Sandbox and Production to block other malicious traffic to your endpoint.


### `Test Utilize `
Available only in sandbox environment. This is used to send PUSH notification to the provided utilized endpoint

- **Endpoint** `/test/utilize/`
- **Returns** JSON Object with the result of your request
- **Accepts** `POST` only.
- **Requires Authentication**

#### Request Parameters
| Parameter    | Type | Description   |
| ------------ | ---- | ------------- |
| order_id | int | Order ID of YGAG API |

#### Request

    POST /test/utilize/ 
    
        {
            "order_id": 12335
        }

#### Response     
    
    200 - You will recieve a POST with the post data above to your notification endpoint


#### `"gift_status" key in /orders/` 

`gift_status` key will return the status of the gift. This can be used to track the gift status any time in the future. More detailed information of `/orders/` is being mentioned [here](https://github.com/YouGotaGift/docs/blob/codesearch-patch-2/Corporate-Rewards-API.md#list-all-orders).

##### Additional Parameter in Response 

| Parameter    | Type | Description   |
| ------------ | ---- | ------------- |
| gift_status | int | Status of the gift `1` : Scheduled , `2` : Delivered, `3` : Utilized   |
