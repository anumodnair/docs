# YouGotaGift.com eGift Pin Redemption API

![YouGotaGift.com Logo](https://cdn.yougotagift.com/static/img/yougotagift.png)


### Introduction

This documentation is part of YouGotaGift.com API v2.0. These API's can be used to redeem the eGift Card using retailer pin.

### `Redeem`
- **Endpoint** `/gift/redeem/`
- **Returns** JSON Object with the result of your request
- **Accepts** `POST` only.
- **Requires Authentication**

#### Request Parameters
| Parameter    | Type | Description   |
| ------------ | ---- | ------------- |
| redemption_pin | string | **Required** Retailer PIN |
| redemption_reference_id | string | **Required** Client reference id |
| gift_token | string | **Required**  Gift token 
| order_id | string | **Required**  Order id |

#### Request

    POST /gift/redeem/

    {
        "redemption_pin": "1234",
        "redemption_reference_id": "abcxyzk",
        "gift_token": "fXDIeaRwXPHh5UVJp3PW1SdSEtrwGcMwB",
        "order_id": "405541",
    }


#### Response     
    HTTP 200 OK
    Content-Type: application/json
    Vary: Accept
    Allow: POST

    {
        "utilized_date": "2017-09-20T13:45:21Z",
        "redemption_reference_id": "abcxyzk",
        "brand_code": 'VRGN',
        "redemption_id": "YT-1-64211",
        "state": 1
    }
        
| Parameter    | Type | Description   |
| ------------ | ---- | ------------- |
| state | int | `0` : Failed, `1` : succeeded |
| utilized_date | date | Utilized date  |
| redemption_id | string | Unique Redemption ID generated by YGAG API |
| redemption_reference_id | string | Unique redemption reference id generated by Client |
| brand_code | string | brand code |

#### How to retrieve redeemed gift/order using client redemption_reference_id


#### Request

    GET /orders/?redemption_reference_id=abcxyzk

    HTTP 200 OK
    Content-Type: application/json
    Vary: Accept
    Allow: GET, HEAD

    {
        "total_count": 1,
        "total_page": 1,
        "current_page": 1,
        "current_page_count": 1,
        "next": null,
        "previous": null,
        "orders": [
            {
                "gift_token": "fXDIeaRwXPHh5UVJp3PW1SdSEtrwGcMwB",
                "reference_id": "",
                "order_id": 405541,
                "state": 1,
                "utilized_details": {
                    "redemption_reference_id": "abcxyzk",
                    "redemption_id": "YT-1-64211",
                    "utilized_date": "2017-09-20T13:45:21Z",
                    "brand_code": "VRGN"
                },
                "gift_status": 3,
                "delivery_type": 1,
                "ordered_amount": {
                    "currency": "AED",
                    "amount": 10
                },
                "extra_fields": null,
                "brand_accepted_amount": {
                    "currency": "AED",
                    "amount": 10
                },
                "barcode": "http://yougotagift.com/gifts/barcode/generate/4827709516917/",
                "pdf_link": "http://gotagift.co/uJuOG7E",
                "gift_voucher": {
                    "code": "4827709516917"
                },
                "expiry_date": "2018-09-20",
                "redemption_instructions": "This eGift Card is redeemable for any merchandise offered in any Virgin Megastore across the UAE.\r\nThis eGift Card is only valid for a one time purchase to the full value unless otherwise specified.",
                "brand_details": {
                    "logo": "http://local.yougotagift.com:11000/media/images/cards/fb/virgin-megastore-uae-FB-300x300.png",
                    "product_image": "http://local.yougotagift.com:11000/media/images/cards/print/virgin-megastore-uae-print.png",
                    "code": "VRGN",
                    "name": "Virgin Megastore"
                },
                "country": "AE"
            }
        ]
    }

In the above response, `utilized_details` key will provide the gift utilized details.

       
