# YouGotaGift.com eGift Pin Redemption API _v2.0_

![YouGotaGift.com Logo](https://cdn.yougotagift.com/static/img/yougotagift.png)


### Introduction

YouGotaGift.comâ€™s API allows you to redeem gift code using retailer user pin. This document includes a definitive list of endpoints, along with common use cases and code examples. API calls can be tested once you receive login credentials of your test account.


#### Credentials

The test calls that can be made from this document are against our Test environment. You'll need your `API_SECRET` and `API_KEY` to access the test account. Your test account details will be shared by YouGotaGift.com

You will need to contact YouGotaGift.com for your production environment, post a successful integration in the test environment, along with your server IP from which the requests are made to the API.

#### How It Works

The YouGotaGift.com API is a HTTP API, which can be called with simple HTTP GET/POST and the result will be in JSON.

#### API Endpoints

* All the API points return JSON responses
* All the API points are callable using HTTP methods `GET` or `POST`
* Authentication is done by signing HTTP requests with secure signatures

**Mode detailed explanation on `Authentication` and `Code snippets` are available in this [link](https://github.com/YouGotaGift/docs/blob/master/Corporate-eGift-API-Sample-Code-V2.md)**

### `HTTP Responses`

| Status Code    | Description   |
| ------------ | ------------- |
| HTTP 200 - OK | Everything worked as expected |
| HTTP 400 - Bad Request | An error in the request, the response will have all the required details of the error. |
| HTTP 401 - Unauthorized | Authentication headers are invalid. |
| HTTP 403 - Forbidden | Request credentials are invalid. |
| HTTP 404 - Not Found | Resource does not exist. |
| HTTP 409 - Conflict | Resource already exists. |
| HTTP 500 | An error occured from our end. |

### `Errors`

In addition to HTTP status codes, error responses may include JSON response with state, message and params (optional) properties. The params property encapsulates user input errors.


### `Redeem`
Available only in sandbox environment.
- **Endpoint** `/gift/redeem/`
- **Returns** JSON Object with the result of your request
- **Accepts** `POST` only.
- **Requires Authentication**

#### Request Parameters
| Parameter    | Type | Description   |
| ------------ | ---- | ------------- |
| redemption_pin | integer | **Required** Retailer PIN |
| redemption_reference_id | string | **Required**  . Client reference id |
| gift_token | string | **Required**  Gift token 
| order_id | string | **Required**  Order id |
| store_staff | string | **optional**  store staff name|
| store_location | string | **optional**  store location|

#### Request

    POST /gift/redeem/

    {
        "redemption_pin": "1234",
        "redemption_reference_id": "abcxyz",
        "gift_token": "fXDIeaRwXPHh5UVJp3PW1SdSEtrwGcMwB",
        "order_id": "405541",
        "store_staff": "",
        "store_location": ""
    }


#### Response     
    HTTP 200 OK
    Content-Type: application/json
    Vary: Accept
    Allow: POST

    {
        "utilized_date": "2017-09-20T10:29:40.156Z",
        "redemption_reference_id": "abcxyz",
        "brand": 10,
        "redemption_id": "YT-1-64202",
        "state": 1
    }
        
| Parameter    | Type | Description   |
| ------------ | ---- | ------------- |
| state | int | `0` : Failed, `1` : succeeded |
| utilized_date | string | Utilized date  |
| redemption_id | string | Unique Redemption ID generated by YouGotGaGift |
| redemption_reference_id | string | Unique redemption reference id generated by Client |
| brand | string | utilized brand |

       
