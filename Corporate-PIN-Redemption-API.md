# YouGotaGift.com eGift Pin Redemption API _v2.0_

![YouGotaGift.com Logo](https://cdn.yougotagift.com/static/img/yougotagift.png)


### Introduction

This documentation is part of YouGotaGift.com API v2.0. These API's can be used for redeem the eGift Card using retailer pin.

#### How It Works

The YouGotaGift.com API is a HTTP API, which can be called with simple HTTP GET/POST and the result will be in JSON.

#### API Endpoints

* All the API points return JSON responses
* All the API points are callable using HTTP methods `GET` or `POST`

### `Redeem`
- **Endpoint** `/gift/redeem/`
- **Returns** JSON Object with the result of your request
- **Accepts** `POST` only.
- **Requires Authentication**

#### Request Parameters
| Parameter    | Type | Description   |
| ------------ | ---- | ------------- |
| redemption_pin | integer | **Required** Retailer PIN |
| redemption_reference_id | string | **Required**  . Client reference id |
| gift_token | string | **Required**  Gift token 
| order_id | string | **Required**  Order id |
| store_staff | string | **optional**  store staff name|
| store_location | string | **optional**  store location|

#### Request

    POST /gift/redeem/

    {
        "redemption_pin": "1234",
        "redemption_reference_id": "abcxyz",
        "gift_token": "fXDIeaRwXPHh5UVJp3PW1SdSEtrwGcMwB",
        "order_id": "405541",
        "store_staff": "",
        "store_location": ""
    }


#### Response     
    HTTP 200 OK
    Content-Type: application/json
    Vary: Accept
    Allow: POST

    {
        "utilized_date": "2017-09-20T10:29:40.156Z",
        "redemption_reference_id": "abcxyz",
        "brand": 10,
        "redemption_id": "YT-1-64202",
        "state": 1
    }
        
| Parameter    | Type | Description   |
| ------------ | ---- | ------------- |
| state | int | `0` : Failed, `1` : succeeded |
| utilized_date | string | Utilized date  |
| redemption_id | string | Unique Redemption ID generated by YouGotGaGift |
| redemption_reference_id | string | Unique redemption reference id generated by Client |
| brand | string | utilized brand |

#### How to retrieve redeemed gifts using client redemption_reference_id

GET orders/?redemption_reference_id=abcxyz
HTTP 200 OK
Content-Type: application/json
Vary: Accept
Allow: GET, HEAD

{
    "total_count": 1,
    "total_page": 1,
    "current_page": 1,
    "current_page_count": 1,
    "next": null,
    "previous": null,
    "orders": [
        {
            "gift_token": "fXDIeaRwXPHh5UVJp3PW1SdSEtrwGcMwB",
            "reference_id": "",
            "order_id": 405541,
            "state": 1,
            "utilized_details": {
                "redemption_reference_id": "abcxyz",
                "redemption_id": "YT-1-64202",
                "utilized_date": "2017-09-20T10:29:40Z",
                "brand": 10
            },
            "gift_status": 3,
            "delivery_type": 0,
            "ordered_amount": {
                "currency": "AED",
                "amount": 300
            },
            "extra_fields": null,
            "brand_code": "VRGN",
            "receiver_name": "ddd",
            "receiver_email": "shameem@yougotagift.com",
            "receiver_phone": ""
        }
    ]
}

In the above response, "utilized_details" key will provide the gift redemption details.

       
